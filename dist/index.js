var t=require("@hotwired/stimulus"),n=function(){function t(t,n){this.identifier=t,this.name=n[0],this.descriptor=n[1],this.options=n[2]||{}}var n;return(n=[{key:"description",get:function(){return this.descriptor.includes("->")?this.descriptor.replace(/->/,"->"+this.identifier+"#"):this.identifier+"#"+this.descriptor}}])&&function(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}(t.prototype,n),t}(),r=function(){function t(t){this.context=t,this.controller=t.controller,this.actions=[]}var r=t.prototype;return r.run=function(){var t;this.add((t=function(t){for(var n=[];t;)n.push(t),t=Object.getPrototypeOf(t);return n.reverse()}(this.controller.constructor),Array.from(t.reduce(function(t,n){return function(t,n){var r=t.actions;return Array.isArray(r)?r:[]}(n).forEach(function(n){return t.add(n)}),t},new Set))))},r.add=function(t){var r=this;t.map(function(t){return new n(r.controller.identifier,t)}).forEach(function(t){r.resolveTargets(t).forEach(function(n){r.addAction(n,t)}),r.actions.push(t)})},r.remove=function(t){var r=this;t.map(function(t){return new n(r.controller.identifier,t)}).forEach(function(t){r.resolveTargets(t).forEach(function(n){r.removeAction(n,t)}),r.actions=r.actions.filter(function(n){return n.description!=t.description})})},r.resolveTargets=function(t){var n=this.findTargets(t.name);return t.options.if?this.filterTargets(n,t.options.if):n},r.findTargets=function(t){return"element"==t?[this.controller.element]:this.controller[t+"Targets"]?[].concat(this.controller[t+"Targets"]):[]},r.filterTargets=function(t,n){var r=this;return t.filter(function(t){var e=r.controller[n];return"function"==typeof e&&(e=e.apply(r.controller,t)),0!=e})},r.addAction=function(t,n){var r=n.description,e=(t.dataset.action||"").split(" ");e.some(function(t){return t==r})||e.push(r),t.dataset.action=e.join(" ").trim()},r.removeAction=function(t,n){var r=n.description,e=(t.dataset.action||"").split(" ");e=e.filter(function(t){return t!=r}),t.dataset.action=e.join(" ").trim()},t}(),e=t.Context.prototype.connect,i=t.Context.prototype.targetConnected;t.Context.prototype.connect=function(){return this.actionSet=new r(this),this.actionSet.run(),e.apply(this,arguments)},t.Context.prototype.targetConnected=function(){return this.actionSet.run(),i.apply(this,arguments)};
//# sourceMappingURL=index.js.map
